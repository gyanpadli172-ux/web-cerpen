<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Website Kumpulan Cerpen</title>
  <style>
    body { 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
      margin: 0; 
      background: #e8ecf1;
      color: #333; 
    }
    header { 
      background: linear-gradient(135deg, #5a3e85 0%, #7c4dff 100%); 
      color: white; 
      padding: 30px 20px; 
      text-align: center; 
      box-shadow: 0 4px 8px rgba(0,0,0,0.2); 
    }
    header h1 { margin: 0; font-size: 2.5em; }
    header p { margin: 10px 0 0; font-size: 1.2em; opacity: 0.9; }
    main { 
      max-width: 1200px; 
      margin: auto; 
      padding: 20px; 
      background: rgba(255, 255, 255, 0.95); 
      border-radius: 12px; 
      box-shadow: 0 4px 12px rgba(0,0,0,0.1); 
    }
    .menu { 
      display: flex; 
      justify-content: center; 
      gap: 20px; 
      margin-top: 30px; 
      flex-wrap: wrap; 
    }
    .btn { 
      background: linear-gradient(135deg, #6d48a8 0%, #9c27b0 100%); 
      color: white; 
      padding: 12px 20px; 
      border-radius: 8px; 
      cursor: pointer; 
      text-align: center; 
      font-size: 16px; 
      border: none; 
      transition: all 0.3s ease; 
      box-shadow: 0 2px 4px rgba(0,0,0,0.2); 
    }
    .btn:hover { 
      background: linear-gradient(135deg, #583a8a 0%, #7b1fa2 100%); 
      transform: translateY(-2px); 
      box-shadow: 0 4px 8px rgba(0,0,0,0.3); 
    }
    
    /* ---------- COVER BUKU BARU ---------- */

    .bookCover {
      padding: 20px;
      border-radius: 6px;
      height: 200px;
      position: relative;
      box-shadow:
        inset 0 0 8px rgba(255,255,255,0.4),
        0 6px 18px rgba(0,0,0,0.25);
      display: flex;
      flex-direction: column;
      justify-content: center;
      text-align: center;
      font-weight: bold;
      cursor: pointer;
      transition: transform .25s ease, box-shadow .25s ease;
    }

    .bookCover:hover {
      transform: scale(1.04) rotate(-1deg);
      box-shadow: 0 10px 28px rgba(0,0,0,0.35);
    }

    .bookSpine {
      position: absolute;
      left: 0;
      width: 18px;
      height: 100%;
      background: rgba(0,0,0,0.18);
      border-radius: 4px 0 0 4px;
    }

    .bookTitle {
      font-size: 1.1em;
      margin-bottom: 6px;
    }

    .bookAuthor {
      font-size: 0.85em;
      opacity: 0.85;
    }

    /* warna cover */
    .red { background:#c62828; color:white; }
    .yellow { background:#fdd835; color:#222; }
    .green { background:#2e7d32; color:white; }
    .blue { background:#1565c0; color:white; }
    .orange { background:#ef6c00; color:white; }
    .black { background:#212121; color:white; }

    /* daftar cerpen grid */
    #cerpenList {
      margin-top: 40px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 22px;
    }

    /* form tambah cerpen */
    #formSection {
      margin-top: 40px;
      padding: 20px;
      background: #fafafa;
      border-radius: 12px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.08);
      display: none;
    }

    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
      font-size: 14px;
    }

    input, select, textarea {
      width: 100%;
      margin-top: 6px;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #bbb;
      font-size: 15px;
    }

    textarea {
      height: 140px;
      resize: vertical;
    }

    #submitBtn {
      margin-top: 20px;
      background: linear-gradient(135deg, #5e35b1 0%, #8e24aa 100%);
      color: white;
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      border: none;
      font-size: 16px;
      width: 100%;
      transition: 0.3s;
    }

    #submitBtn:hover {
      background: linear-gradient(135deg, #4527a0 0%, #6a1b9a 100%);
      transform: translateY(-2px);
    }

  </style>
</head>

<body>

<header>
  <h1>Kumpulan Cerpen Peserta Didik</h1>
  <p>Setiap cerita adalah karya yang patut dibaca</p>
</header>

<main>
  <div class="menu">
    <button class="btn" onclick="showForm()">Tambah Cerpen</button>
    <button class="btn" onclick="showCerpenList()">Lihat Daftar Cerpen</button>
  </div>

  <section id="formSection">
    <h2>Tambahkan Cerpen Baru</h2>

    <label>Judul Cerpen</label>
    <input type="text" id="judulInput" placeholder="Masukkan judul cerpen">

    <label>Nama Penulis</label>
    <input type="text" id="penulisInput" placeholder="Nama Anda">

    <label>Cover Warna</label>
    <select id="coverColorInput">
      <option value="red">Merah</option>
      <option value="yellow">Kuning</option>
      <option value="green">Hijau</option>
      <option value="blue">Biru</option>
      <option value="orange">Orange</option>
      <option value="black">Hitam</option>
    </select>

    <label>Isi Cerpen</label>
    <textarea id="cerpenInput" placeholder="Tulis cerpen di sini..."></textarea>

    <button id="submitBtn" onclick="submitCerpen()">Kirim Cerpen</button>
  </section>

  <section id="cerpenList">
    <!-- Cerpen akan tampil otomatis -->
  </section>
</main>
<script type="module">
  // Firebase configuration (punya kamu)
  const firebaseConfig = {
    apiKey: "AIzaSyAtTEIsj-A_OY0wjkUFUcByG6XnStVqTSE",
    authDomain: "cerpenwoyla.firebaseapp.com",
    projectId: "cerpenwoyla",
    storageBucket: "cerpenwoyla.firebasestorage.app",
    messagingSenderId: "285662260886",
    appId: "1:285662260886:web:b2023d3a51c7e134f81cb7"
  };

  // Load Firebase SDK
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
  import {
    getFirestore,
    collection,
    addDoc,
    onSnapshot,
    query,
    orderBy,
    serverTimestamp
  } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore.js";

  // Init Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const cerpenCollection = collection(db, "cerpen");

  const formSection = document.getElementById("formSection");
  const cerpenList = document.getElementById("cerpenList");

  function showForm() {
    formSection.style.display = "block";
    cerpenList.style.display = "none";
  }

  function showCerpenList() {
    formSection.style.display = "none";
    cerpenList.style.display = "grid";
  }

  // Submit Cerpen
  async function submitCerpen() {
    const judul = document.getElementById("judulInput").value.trim();
    const penulis = document.getElementById("penulisInput").value.trim();
    const isi = document.getElementById("cerpenInput").value.trim();
    const coverColor = document.getElementById("coverColorInput").value;

    if (!judul || !penulis || !isi) {
      alert("Lengkapi semua kolom sebelum mengirim.");
      return;
    }

    await addDoc(cerpenCollection, {
      judul,
      penulis,
      isi,
      coverColor,
      timestamp: serverTimestamp()
    });

    document.getElementById("judulInput").value = "";
    document.getElementById("penulisInput").value = "";
    document.getElementById("cerpenInput").value = "";

    alert("Cerpen berhasil dikirim!");
    showCerpenList();
  }

  window.submitCerpen = submitCerpen;
  window.showForm = showForm;
  window.showCerpenList = showCerpenList;

  // Listen realtime data
  const q = query(cerpenCollection, orderBy("timestamp", "desc"));

  onSnapshot(q, (snapshot) => {
    cerpenList.innerHTML = "";

    snapshot.forEach((doc) => {
      const data = doc.data();
      const wrapper = document.createElement("div");

      wrapper.classList.add("book-card");

      wrapper.innerHTML = `
        <div class="book-cover cover-${data.coverColor}">
          <div class="book-title">${data.judul}</div>
          <div class="book-author">oleh ${data.penulis}</div>
        </div>
      `;

      wrapper.onclick = () => {
        alert(
          "Judul: " + data.judul +
          "\nPenulis: " + data.penulis +
          "\n\n" + data.isi
        );
      };

      cerpenList.appendChild(wrapper);
    });
  });

</script>

</body>
</html>

<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Website Kumpulan Cerpen</title>
  <style>
    body { 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
      margin: 0; 
      background: #f2f4f7;
      color: #333; 
    }
    header { 
      background: linear-gradient(135deg, #5a3e85 0%, #7c4dff 100%); 
      color: white; 
      padding: 30px 20px; 
      text-align: center; 
      box-shadow: 0 4px 8px rgba(0,0,0,0.2); 
    }
    main { 
      max-width: 1200px; 
      margin: auto; 
      padding: 20px; 
      background: rgba(255, 255, 255, 0.95); 
      border-radius: 12px; 
      box-shadow: 0 4px 12px rgba(0,0,0,0.1); 
    }

    /* --- COVER COLORS --- */
    .cover-red { background-color: #e74c3c; color:white; }
    .cover-yellow { background-color: #f1c40f; color:black; }
    .cover-green { background-color: #27ae60; color:white; }
    .cover-blue { background-color: #3498db; color:white; }
    .cover-orange { background-color: #e67e22; color:white; }
    .cover-black { background-color: #2c3e50; color:white; }

    .cover-box {
      padding: 18px;
      border-radius: 10px;
      margin-bottom: 15px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.15);
    }

    /* existing styles remain unchanged ... */
  </style>
</head>
<body>
  <header>
    <h1>Kumpulan Cerpen Peserta Didik</h1>
    <p>Bagikan karyamu dan baca karya teman-temanmu!</p>
  </header>

  <main>
    <div class="menu">
      <div class="btn" onclick="showSection('upload')">Unggah Tugas Cerpen</div>
      <div class="btn" onclick="showSection('articles')">Lihat Kumpulan Cerpen</div>
    </div>

    <!-- UPLOAD SECTION -->
    <div id="upload" class="section">
      <h2>Unggah Cerpen Baru</h2>
      <form id="uploadForm" onsubmit="return false;">
        <label for="namaPenulis">Nama Penulis *</label>
        <input type="text" id="namaPenulis" required />

        <label for="judul">Judul Cerpen *</label>
        <input type="text" id="judul" required />

        <label for="coverColor">Warna Cover *</label>
        <select id="coverColor" required>
          <option value="red">Merah</option>
          <option value="yellow">Kuning</option>
          <option value="green">Hijau</option>
          <option value="blue">Biru</option>
          <option value="orange">Orange</option>
          <option value="black">Hitam</option>
        </select>

        <label for="isi">Isi Cerpen *</label>
        <textarea id="isi" required placeholder="Tulis cerpen Anda di sini..."></textarea>

        <div class="actions">
          <button type="button" class="btn" onclick="saveCerpen()">Simpan Cerpen</button>
          <button type="button" class="btn" onclick="clearForm()">Bersihkan Form</button>
        </div>
      </form>
    </div>

    <!-- ARTICLE LIST -->
    <div id="articles" class="section">
      <h2>Kumpulan Cerpen</h2>
      <div id="list" class="grid"></div>
    </div>

  </main>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAtTEIsj-A_OY0wjkUFUcByG6XnStVqTSE",
      authDomain: "cerpenwoyla.firebaseapp.com",
      projectId: "cerpenwoyla",
      storageBucket: "cerpenwoyla.firebasestorage.app",
      messagingSenderId: "285662260886",
      appId: "1:285662260886:web:b2023d3a51c7e134f81cb7"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    let cerpenList = [];

    function saveCerpen() {
      const namaPenulis = document.getElementById('namaPenulis').value.trim();
      const judul = document.getElementById('judul').value.trim();
      const isi = document.getElementById('isi').value.trim();
      const coverColor = document.getElementById('coverColor').value;

      if (!namaPenulis || !judul || !isi || !coverColor) {
        alert('Semua field wajib diisi!');
        return;
      }

      db.collection("cerpensmanda").add({
        namaPenulis,
        judul,
        isi,
        coverColor,
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      }).then(() => {
        alert("Cerpen berhasil disimpan!");
        clearForm();
        showSection('articles');
      });
    }

    function renderList() {
      db.collection("cerpensmanda")
        .orderBy("createdAt", "asc")
        .onSnapshot(snapshot => {
          cerpenList = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
          updateListDisplay();
        });
    }

    function updateListDisplay() {
      const container = document.getElementById('list');
      container.innerHTML = '';

      cerpenList.forEach(c => {
        const div = document.createElement('div');
        div.className = `cover-box cover-${c.coverColor}`;

        div.innerHTML = `
          <h3>${c.judul}</h3>
          <p>Oleh: ${c.namaPenulis}</p>
        `;

        container.appendChild(div);
      });
    }

    renderList();
  </script>
</body>
</html>